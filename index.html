<!DOCTYPE html>
<html>
<head lang="en">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="stylesheet.css"/>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <img id="xwing" src="photos/xwing-01.png">
    <img id="asteroid" src="photos/asteroid.png">
    <img id="asteroid2" src="photos/asteroid2.png">
    <canvas id="space" width="1000" height="1000">
        <script type="text/javascript">
            $("#xwing").hide();
            $("#asteroid").hide();
            $("#asteroid2").hide();
            var c = document.getElementById("space");
            var ctx = c.getContext("2d");

            var speed = space.width / 1000;

            var ships = [];

            var asteroids = [];

            function animate() {

                reqAnimFrame = window.mozRequestAnimationFrame    ||
                        window.webkitRequestAnimationFrame ||
                        window.msRequestAnimationFrame     ||
                        window.oRequestAnimationFrame
                ;

                reqAnimFrame(animate);
                ctx.clearRect(0, 0, 1000, 1000);
                var ship = ships[0];
                ship.move(ship.x += speed, ship.y += speed);
                ship.draw(ctx);
                var asteroid = asteroids[0];
                asteroid.move(asteroid.x += speed, asteroid.y += speed);
                asteroid.draw(ctx);

//                x += speed;
//
//                if(x <= space.width){
//                    speed;
//                } else {
//                    x = 0;
//                }


            }

            function moveTo(ob, new_x, new_y) {

            }

            function draw(ctx) {


                var ship = create_ship(50, 500, ctx);
                console.log(ship);
                ships.push(ship);

                var asteroid = create_asteroid(50, 50, ctx);
                console.log(asteroid);
                asteroids.push(asteroid);
                //ctx.clearRect(0, 0, 1000, 1000);
                //ctx.drawImage(img,x,y);

                // Asteroid
//                ctx.beginPath();
//                ctx.arc(100,100,30,0,2*Math.PI);
//                var grd = ctx.createRadialGradient(75,50,5,90,60,100);
//                grd.addColorStop(0,"red");
//                grd.addColorStop(1,"black");
//                ctx.fillStyle = grd;
//                ctx.fill();
            }

            function create_ship(x, y, ctx) {
                var s = new Ship(x, y, '');

                // Draw the ship
                s.draw(ctx);
                return s;
            }

            function create_asteroid(x, y, ctx) {
                var a = new Asteroid(x, y, '');

                //Draw the asteroid
                a.draw(ctx);
                return a;
            }

            function Ship(x, y, username) {
                this.x = x;
                this.y = y;
                this.username = '';
                this.hp = 0;
                this.img = document.getElementById("xwing");

                this.draw = function(ctx) {
                    ctx.drawImage(this.img, this.x, this.y);
                };
                this.move = function(x, y) {
                    this.x = x % c.width;
                    this.y = y % c.height;
                };
            }

            function Asteroid(x, y, username) {
                this.x = x;
                this.y = y;
                this.username = '';
                this.img = document.getElementById("asteroid2");

                this.draw = function(ctx) {
                    ctx.drawImage(this.img, this.x, this.y);
                };
                this.move = function(x, y) {
                    this.x = x % c.width;
                    this.y = y % c.height;
                };
            }



            // Run on startup
            draw(ctx);

            animate();
        </script>
    </canvas>
</body>
</html>